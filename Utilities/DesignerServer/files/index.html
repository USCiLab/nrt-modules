<html>
  <head>
    <title>NRT Designer</title>
  </head>
</html>
<body>
  <h1>NRT Designer</h1>
  <div id="nrt_socket_status">websocket not opened</div>
</body>

<script type="text/javascript" src="js/jquery-1.7.2.min.js"></script>
<script type="text/javascript" src="js/nrt_protocol.js"></script>
<script type="text/javascript">
  function get_websocket_url()
  {
    var pcol;
    var u = document.URL;

    pcol = "ws://";
    u = u.substr(7);

    u = u.split('/');

    return pcol + u[0];
  }

  var master_connection = new nrt_protocol(get_websocket_url());

  //var socket_address = get_websocket_url();
  //var nrt_socket = new WebSocket(socket_address, "nrt-ws-protocol");

  //try {
  //  $("#nrt_socket_status").html("trying to open [" + socket_address + "]");

  //  nrt_socket.onopen = function() {
  //    $("#nrt_socket_status").html("websocket connection opened");
  //  }
  //  nrt_socket.onmessage = function got_packet(msg) {
  //    $("#nrt_socket_status").append(msg.data);
  //  }
  //  nrt_socket.onclose = function() {
  //    $("#nrt_socket_status").html("websocket closed");
  //  }
  //}
  //catch(exception) {
  //    $("#nrt_socket_status").html("EXCEPTION: " + exception);
  //}
</script>
